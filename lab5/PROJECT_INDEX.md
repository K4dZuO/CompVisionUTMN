# ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ - ะะพะปะฝัะน ะธะฝะดะตะบั

## ๐ ะะพัะฝะตะฒะฐั ะดะธัะตะบัะพัะธั

```
lab5/
โโโ ๐ main.py                    # ะขะพัะบะฐ ะฒัะพะดะฐ ะฟัะธะปะพะถะตะฝะธั
โโโ ๐ README.md                  # ะัะฝะพะฒะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั ะฟัะพะตะบัะฐ
โโโ ๐ CHEATSHEET.md              # ะััััะฐั ัะฟะฐัะณะฐะปะบะฐ ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
โโโ ๐ requirements.txt           # ะะฐะฒะธัะธะผะพััะธ Python
โโโ ๐ ะัะฐะบัะธะบะฐ 5.docx            # ะะฐะดะฐะฝะธะต (ะธััะพะดะฝัะน ะดะพะบัะผะตะฝั)
โโโ ๐ฅ vecteezy_traffic...mov     # ะขะตััะพะฒะพะต ะฒะธะดะตะพ ั ััะฐัะธะบะพะผ
```

---

## ๐ core/ - ะฏะดัะพ ะฐะปะณะพัะธัะผะพะฒ

```
core/
โโโ ๐ horn_schunck.py            # ะะปะณะพัะธัะผ ะฅะพัะฝะฐ-ะจะฐะฝะบะฐ (ะฟะปะพัะฝัะน ะฟะพัะพะบ)
โ   โโโ class HornSchunckProcessor
โ       โโโ compute_flow()                    # ะััะธัะปะตะฝะธะต u, v
โ       โโโ compute_flow_magnitude_direction() # ะััะธัะปะตะฝะธะต magnitude, angle
โ       โโโ visualize_flow()                  # ะะธะทัะฐะปะธะทะฐัะธั
โ
โโโ ๐ lucas_kanade.py            # ะะปะณะพัะธัะผ ะัะบะฐัะฐ-ะะฐะฝะฐะดะต (ัะฐะทัะตะถะตะฝะฝัะน ะฟะพัะพะบ)
โ   โโโ class LucasKanadeProcessor
โ       โโโ detect_features()                 # ะะตัะตะบัะธั ัะณะปะพะฒ (Shi-Tomasi)
โ       โโโ compute_flow()                    # ะััะธัะปะตะฝะธะต ะฟะพัะพะบะฐ
โ       โโโ compute_flow_vectors()            # ะะตะบัะพัั ะดะปั ะฒะธะทัะฐะปะธะทะฐัะธะธ
โ
โโโ ๐ object_tracker.py          # ะััะปะตะถะธะฒะฐะฝะธะต ะพะฑัะตะบัะพะฒ
โ   โโโ class CentroidTracker                 # ะขัะตะบะตั ะฟะพ ัะตะฝััะพะธะดะฐะผ
โ   โ   โโโ register()                        # ะะตะณะธัััะฐัะธั ะฝะพะฒะพะณะพ ะพะฑัะตะบัะฐ
โ   โ   โโโ deregister()                      # ะฃะดะฐะปะตะฝะธะต ะพะฑัะตะบัะฐ
โ   โ   โโโ update()                          # ะะฑะฝะพะฒะปะตะฝะธะต ะฝะฐ ะฝะพะฒะพะผ ะบะฐะดัะต
โ   โ
โ   โโโ class ObjectTracker                   # ะัะฝะพะฒะฝะพะน ััะตะบะตั
โ       โโโ process_frame()                   # ะะฑัะฐะฑะพัะบะฐ ั MOG2
โ       โโโ update_from_mask()                # ะะฑัะฐะฑะพัะบะฐ ั ะผะฐัะบะพะน ะฟะพัะพะบะฐ
โ
โโโ ๐ video_processor.py         # ะะพะฝััะพะปะปะตั ะฒะธะดะตะพ
โ   โโโ class VideoController
โ       โโโ load_video()                      # ะะฐะณััะทะบะฐ ะฒะธะดะตะพ
โ       โโโ get_frame()                       # ะะพะปััะตะฝะธะต ะบะฐะดัะฐ ะฟะพ ะธะฝะดะตะบัั
โ       โโโ get_frame_pair()                  # ะะฐัะฐ ะบะฐะดัะพะฒ ะดะปั ะฟะพัะพะบะฐ
โ       โโโ get_next_frame()                  # ะกะปะตะดัััะธะน ะบะฐะดั
โ       โโโ set_frame()                       # ะฃััะฐะฝะพะฒะบะฐ ัะตะบััะตะณะพ ะบะฐะดัะฐ
โ
โโโ ๐ __init__.py                # ะะฝะธัะธะฐะปะธะทะฐัะธั ะฟะฐะบะตัะฐ
```

---

## ๐ gui/ - ะัะฐัะธัะตัะบะธะน ะธะฝัะตััะตะนั

```
gui/
โโโ ๐ main_window.py             # ะะปะฐะฒะฝะพะต ะพะบะฝะพ ะฟัะธะปะพะถะตะฝะธั
โ   โโโ class ProcessingThread                # ะะพัะพะบ ะพะฑัะฐะฑะพัะบะธ (QThread)
โ   โ   โโโ run()                             # ะัะธะฝััะพะฝะฝะฐั ะพะฑัะฐะฑะพัะบะฐ
โ   โ
โ   โโโ class OpticalFlowMainWindow           # ะะปะฐะฒะฝะพะต ะพะบะฝะพ (QMainWindow)
โ       โโโ init_ui()                         # ะะฝะธัะธะฐะปะธะทะฐัะธั UI
โ       โโโ load_video()                      # ะะฐะณััะทะบะฐ ะฒะธะดะตะพ
โ       โโโ play_video()                      # ะะพัะฟัะพะธะทะฒะตะดะตะฝะธะต
โ       โโโ on_frame_changed()                # ะะฑัะฐะฑะพัะบะฐ ัะผะตะฝั ะบะฐะดัะฐ
โ       โโโ process_current_frame()           # ะะฑัะฐะฑะพัะบะฐ ะบะฐะดัะฐ
โ       โโโ on_processing_finished()          # ะะฐะฒะตััะตะฝะธะต ะพะฑัะฐะฑะพัะบะธ
โ       โโโ update_visualization()            # ะะฑะฝะพะฒะปะตะฝะธะต ะฒะธะทัะฐะปะธะทะฐัะธะธ
โ       โโโ display_frame()                   # ะัะพะฑัะฐะถะตะฝะธะต ะบะฐะดัะฐ
โ
โโโ ๐ controls.py                # ะะธะดะถะตัั ัะฟัะฐะฒะปะตะฝะธั
โ   โโโ class ParameterSlider                 # ะกะปะฐะนะดะตั ั ะผะตัะบะพะน ะธ ะทะฝะฐัะตะฝะธะตะผ
โ   โโโ class AlgorithmParametersWidget       # ะะฐัะฐะผะตััั ะฐะปะณะพัะธัะผะพะฒ
โ   โ   โโโ get_horn_schunck_params()
โ   โ   โโโ get_lucas_kanade_params()
โ   โ   โโโ get_tracker_params()
โ   โ
โ   โโโ class VideoControlsWidget             # ะฃะฟัะฐะฒะปะตะฝะธะต ะฒะธะดะตะพ
โ   โ   โโโ Signals: playClicked, pauseClicked, stopClicked, frameChanged
โ   โ
โ   โโโ class VisualizationControlsWidget     # ะฃะฟัะฐะฒะปะตะฝะธะต ะฒะธะทัะฐะปะธะทะฐัะธะตะน
โ       โโโ get_visualization_params()
โ
โโโ ๐ __init__.py                # ะะฝะธัะธะฐะปะธะทะฐัะธั ะฟะฐะบะตัะฐ
```

---

## ๐ utils/ - ะฃัะธะปะธัั

```
utils/
โโโ ๐ visualization.py           # ะะธะทัะฐะปะธะทะฐัะธั ัะตะทัะปััะฐัะพะฒ
โ   โโโ class VisualizationEngine
โ       โโโ visualize_sparse_flow()           # ะะฐะทัะตะถะตะฝะฝัะน ะฟะพัะพะบ (ัััะตะปะบะธ)
โ       โโโ visualize_dense_flow_hsv()        # ะะปะพัะฝัะน ะฟะพัะพะบ (HSV)
โ       โโโ visualize_dense_flow_grid()       # ะะปะพัะฝัะน ะฟะพัะพะบ (ัะตัะบะฐ ัััะตะปะพะบ)
โ       โโโ visualize_flow_heatmap()          # ะขะตะฟะปะพะฒะฐั ะบะฐััะฐ
โ       โโโ visualize_tracked_objects()       # ะััะปะตะถะธะฒะฐะตะผัะต ะพะฑัะตะบัั
โ           โโโ ะะธััะตั ะทะตะปะตะฝัะต ัััะตะปะบะธ ะฟะพัะพะบะฐ
โ           โโโ ะะธััะตั bounding boxes
โ           โโโ ะะธััะตั ID ะพะฑัะตะบัะพะฒ
โ           โโโ ะะธััะตั ััะฐะตะบัะพัะธะธ
โ           โโโ ะะธััะตั ัะตะฝััะพะธะดั
โ
โโโ ๐ report_generator.py        # ะะตะฝะตัะฐัะธั ะพััะตัะพะฒ
โ   โโโ class ReportGenerator
โ       โโโ add_video_metadata()              # ะะตัะฐะดะฐะฝะฝัะต ะฒะธะดะตะพ
โ       โโโ add_algorithm_parameters()        # ะะฐัะฐะผะตััั ะฐะปะณะพัะธัะผะพะฒ
โ       โโโ add_frame_results()               # ะะตะทัะปััะฐัั ะพะฑัะฐะฑะพัะบะธ
โ       โโโ add_metrics()                     # ะะตััะธะบะธ (ะฒัะตะผั ะธ ั.ะด.)
โ       โโโ export_json()                     # ะญะบัะฟะพัั ะฒ JSON
โ
โโโ ๐ __init__.py                # ะะฝะธัะธะฐะปะธะทะฐัะธั ะฟะฐะบะตัะฐ
```

---

## ๐ tests/ - ะขะตััั

```
tests/
โโโ ๐ test_tracker.py            # ะขะตััั ะดะปั ััะตะบะตัะฐ ะพะฑัะตะบัะพะฒ
โ   โโโ test_tracking_movement()              # ะััะปะตะถะธะฒะฐะฝะธะต ะดะฒะธะถะตะฝะธั
โ   โโโ test_tracking_disappearance()         # ะััะตะทะฐััะธะต ะพะฑัะตะบัั
โ   โโโ test_multiple_objects()               # ะะตัะบะพะปัะบะพ ะพะฑัะตะบัะพะฒ
โ   โโโ test_max_distance()                   # ะะฐัะฐะผะตัั ะผะฐะบั. ะดะธััะฐะฝัะธะธ
โ
โโโ ๐ test_horn_schunck.py       # ะขะตััั ะดะปั ะฅะพัะฝะฐ-ะจะฐะฝะบะฐ (ะตัะปะธ ะตััั)
โโโ ๐ test_lucas_kanade.py       # ะขะตััั ะดะปั ะัะบะฐัะฐ-ะะฐะฝะฐะดะต (ะตัะปะธ ะตััั)
โโโ ๐ __init__.py                # ะะฝะธัะธะฐะปะธะทะฐัะธั ะฟะฐะบะตัะฐ
```

---

## ๐ docs/ - ะะพะบัะผะตะฝัะฐัะธั

```
docs/
โโโ ๐ FINAL_SUMMARY.md           # โญ ะะพะปะฝะฐั ัะฒะพะดะบะฐ ะฟัะพะตะบัะฐ
โ   โโโ ะะฑะทะพั ะฒัะตั ััะฝะบัะธะน
โ   โโโ ะขะตัะฝะธัะตัะบะธะต ัะปัััะตะฝะธั
โ   โโโ ะะตะบะพะผะตะฝะดัะตะผัะต ะฝะฐัััะพะนะบะธ
โ   โโโ ะขะตััะธัะพะฒะฐะฝะธะต
โ   โโโ ะกะพะพัะฒะตัััะฒะธะต ััะตะฑะพะฒะฐะฝะธัะผ
โ
โโโ ๐ tracking_explanation.md    # ๐ ะะฑัััะฝะตะฝะธะต "ะฝะฐ ะฟะฐะปััะฐั"
โ   โโโ ะะฐะบ ัะฐะฑะพัะฐะตั ะฅะพัะฝ-ะจะฐะฝะบ
โ   โโโ ะะฐะบ ัะฐะฑะพัะฐะตั ะัะบะฐั-ะะฐะฝะฐะดะต
โ   โโโ ะกะพะทะดะฐะฝะธะต ะผะฐัะบะธ ะดะฒะธะถะตะฝะธั (Otsu)
โ   โโโ ะฃะปัััะตะฝะฝะฐั ะผะพััะพะปะพะณะธั (3 ััะฐะฟะฐ)
โ   โโโ ะฆะตะฝััะพะธะดะฝัะน ััะตะบะตั
โ   โโโ ะะธะทัะฐะปะธะทะฐัะธั ัะตะทัะปััะฐัะพะฒ
โ   โโโ ะขะธะฟะธัะฝัะต ะฟัะพะฑะปะตะผั ะธ ัะตัะตะฝะธั
โ
โโโ ๐ quick_start.md             # ๐ ะัะฐะบัะธัะตัะบะพะต ััะบะพะฒะพะดััะฒะพ
โ   โโโ ะกัะตะฝะฐัะธะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธั
โ   โโโ ะะฐัััะพะนะบะฐ ะฟะฐัะฐะผะตััะพะฒ
โ   โโโ ะขะธะฟะธัะฝัะต ะฟัะพะฑะปะตะผั
โ   โโโ ะะตัะตะฝะธั
โ   โโโ ะะตะบะพะผะตะฝะดะฐัะธะธ ะดะปั ัะฐะทะฝัั ะทะฐะดะฐั
โ
โโโ ๐ detection_improvements.md  # ๐ง ะขะตัะฝะธัะตัะบะธะต ัะปัััะตะฝะธั
โ   โโโ ะกัะฐะฒะฝะตะฝะธะต "ะฑัะปะพ/ััะฐะปะพ"
โ   โโโ ะะดะฐะฟัะธะฒะฝัะน ะฟะพัะพะณ Otsu
โ   โโโ ะฃะปัััะตะฝะฝะฐั ะผะพััะพะปะพะณะธั
โ   โโโ ะะธะทัะฐะปัะฝะฐั ััะตะผะฐ
โ   โโโ ะะตะบะพะผะตะฝะดัะตะผัะต ะฟะฐัะฐะผะตััั
โ
โโโ ๐ ui_improvements.md         # ๐ก ะฃะปัััะตะฝะธั ะธะฝัะตััะตะนัะฐ
โ   โโโ ะัะฟัะฐะฒะปะตะฝะฝัะต ะฟัะพะฑะปะตะผั
โ   โโโ ะะพะฒัะต ะฒะพะทะผะพะถะฝะพััะธ
โ   โโโ ะะฒัะพ-ะพะฑัะฐะฑะพัะบะฐ
โ   โโโ ะกัะฐัััั ั ัะฒะตัะฐะผะธ
โ   โโโ ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั
โ
โโโ ๐ implementation_summary.md  # ๐ ะขะตัะฝะธัะตัะบะฐั ัะฒะพะดะบะฐ
    โโโ ะััะธัะตะบัััะฐ ัะธััะตะผั
    โโโ ะะพะดัะปะธ ะธ ะบะปะฐััั
    โโโ ะะฐะฒะธัะธะผะพััะธ
    โโโ ะะฐัะฐะผะตััั ะฟะพ ัะผะพะปัะฐะฝะธั
    โโโ ะะทะฒะตััะฝัะต ะพะณัะฐะฝะธัะตะฝะธั
```

---

## ๐ reports/ - ะััะตัั (ัะพะทะดะฐะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ)

```
reports/
โโโ ๐ report_YYYYMMDD_HHMMSS.json  # JSON ะพััะตัั ั ัะตะทัะปััะฐัะฐะผะธ
    โโโ video_metadata                  # ะะตัะฐะดะฐะฝะฝัะต ะฒะธะดะตะพ
    โโโ algorithm_parameters            # ะะฐัะฐะผะตััั ะฐะปะณะพัะธัะผะพะฒ
    โโโ frame_results                   # ะะตะทัะปััะฐัั ะฟะพ ะบะฐะดัะฐะผ
    โโโ metrics                         # ะะตััะธะบะธ (ะฒัะตะผั ะพะฑัะฐะฑะพัะบะธ)
```

---

## ๐ฏ ะััััะฐั ะฝะฐะฒะธะณะฐัะธั

### ะฅะพัั ะฟะพะฝััั, ะบะฐะบ ัะฐะฑะพัะฐะตั ัะธััะตะผะฐ:
โ `docs/tracking_explanation.md`

### ะฅะพัั ะฑััััะพ ะฝะฐัะฐัั ัะฐะฑะพัั:
โ `CHEATSHEET.md` ะธะปะธ `docs/quick_start.md`

### ะฅะพัั ัะทะฝะฐัั ัะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ:
โ `docs/FINAL_SUMMARY.md` ะธะปะธ `docs/implementation_summary.md`

### ะฅะพัั ะฟะพะฝััั, ััะพ ะฑัะปะพ ัะปัััะตะฝะพ:
โ `docs/detection_improvements.md` ะธะปะธ `docs/ui_improvements.md`

### ะฅะพัั ะธะทะผะตะฝะธัั ะฐะปะณะพัะธัะผ ะฟะพัะพะบะฐ:
โ `core/horn_schunck.py` ะธะปะธ `core/lucas_kanade.py`

### ะฅะพัั ะธะทะผะตะฝะธัั ััะตะบะธะฝะณ:
โ `core/object_tracker.py`

### ะฅะพัั ะธะทะผะตะฝะธัั ะฒะธะทัะฐะปะธะทะฐัะธั:
โ `utils/visualization.py`

### ะฅะพัั ะธะทะผะตะฝะธัั ะธะฝัะตััะตะนั:
โ `gui/main_window.py` ะธะปะธ `gui/controls.py`

### ะฅะพัั ะทะฐะฟัััะธัั ัะตััั:
โ `python -m pytest tests/`

---

## ๐ ะกัะฐัะธััะธะบะฐ ะฟัะพะตะบัะฐ

- **ะัะตะณะพ ัะฐะนะปะพะฒ Python**: ~12
- **ะกััะพะบ ะบะพะดะฐ**: ~3000+
- **ะคะฐะนะปะพะฒ ะดะพะบัะผะตะฝัะฐัะธะธ**: 6
- **Unit-ัะตััะพะฒ**: 4
- **ะะพะดะดะตัะถะธะฒะฐะตะผัั ะฐะปะณะพัะธัะผะพะฒ**: 2 (ะฅะพัะฝ-ะจะฐะฝะบ, ะัะบะฐั-ะะฐะฝะฐะดะต)
- **ะะตะถะธะผะพะฒ ะฒะธะทัะฐะปะธะทะฐัะธะธ**: 4 (HSV, ัััะตะปะบะธ, heatmap, sparse)

---

## ๐ ะกะฒัะทะธ ะผะตะถะดั ะผะพะดัะปัะผะธ

```
main.py
  โโโ gui/main_window.py (OpticalFlowMainWindow)
      โโโ core/video_processor.py (VideoController)
      โโโ core/horn_schunck.py (HornSchunckProcessor)
      โโโ core/lucas_kanade.py (LucasKanadeProcessor)
      โโโ core/object_tracker.py (ObjectTracker, CentroidTracker)
      โโโ utils/visualization.py (VisualizationEngine)
      โโโ utils/report_generator.py (ReportGenerator)
      โโโ gui/controls.py (ParameterSlider, AlgorithmParametersWidget, etc.)
```

---

**ะะฐะฒะธะณะฐัะธั ะฟะพ ะฟัะพะตะบัั ัะฟัะพัะตะฝะฐ!** ๐บ๏ธ
