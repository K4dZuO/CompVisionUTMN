üß† –ö–æ–Ω—Ç—Ä–∞–∫—Ç –∑–∞–¥–∞—á–∏: ¬´–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤—Ä—É—á–Ω—É—é¬ª
üéØ –¶–µ–ª—å

–°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å –Ω–∞ Python –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≥–æ—Ç–æ–≤—ã—Ö CV-—Ñ—É–Ω–∫—Ü–∏–π, –∏—Å–ø–æ–ª—å–∑—É—è —Ç–æ–ª—å–∫–æ numpy –¥–ª—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏.
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏ —Å—Ä–∞–≤–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥—Ö–æ–¥–æ–≤ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏: –ø–æ –∫—Ä–∞—è–º, –ø–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–º –ø–æ—Ä–æ–≥–∞–º –∏ –ø–æ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º –ø–æ—Ä–æ–≥–∞–º.

‚öôÔ∏è –û–±—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–¢–æ–ª—å–∫–æ numpy –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pySide6 –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ GUI, matplotlib.pyplot –¥–ª—è –≤—ã–≤–æ–¥–∞ –∏ –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º, cv2 –∏–ª–∏ PIL ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏/–≤—ã–≤–æ–¥–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

–í—Å–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω—ã –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ –º–æ–¥—É–ª—è, —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏ docstring-–æ–ø–∏—Å–∞–Ω–∏–µ–º.

–ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–º –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–º ‚Äî –±–µ–∑ —á—ë—Ä–Ω—ã—Ö —è—â–∏–∫–æ–≤ –∏ –≥–æ—Ç–æ–≤—ã—Ö CV-—Ñ—É–Ω–∫—Ü–∏–π.

–î–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å:

–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞;

–∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (T, k, C, —á–∏—Å–ª–æ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–π –∏ —Ç.–ø.);

—Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ –æ–¥–Ω–æ–º –ø–æ–ª–æ—Ç–Ω–µ.

üìå 1. –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –Ω–µ–æ–¥–Ω–æ—Ä–æ–¥–Ω–æ—Å—Ç—è–º (–≤—ã–¥–µ–ª–µ–Ω–∏–µ –∫—Ä–∞–µ–≤)

–¶–µ–ª—å: —Ä–∞–∑–¥–µ–ª–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –æ–±–ª–∞—Å—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É—è –∫–∞—Ä—Ç—É –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤.

–ó–∞–¥–∞—á–∏:

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ –≤—Ä—É—á–Ω—É—é:

–æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –°–æ–±–µ–ª—è, –ü—Ä–µ–≤–∏—Ç—Ç–∞ –∏ –†–æ–±–µ—Ä—Ç—Å–∞ (–≤—ã–±–æ—Ä —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä);

–º–æ–¥—É–ª—å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ G = sqrt(Gx¬≤ + Gy¬≤) –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Œ∏ = arctan(Gy/Gx);

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∏–Ω–∞—Ä–∏–∑–∞—Ü–∏—é –ø–æ –≤–µ–ª–∏—á–∏–Ω–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ (T_edge);

–í–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ —Å—Ä–∞–≤–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã.

üìå 2. –ü–æ—Ä–æ–≥–æ–≤–∞—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º –ø–æ—Ä–æ–≥–æ–º

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç—Ä–∏ —Å–ø–æ—Å–æ–±–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞ T:

2.1. –ú–µ—Ç–æ–¥ –ø–ª–æ—â–∞–¥–∏ (P-tile)

–í—ã—á–∏—Å–ª–∏—Ç—å –ø–æ—Ä–æ–≥ —Ç–∞–∫, —á—Ç–æ–±—ã –∑–∞–¥–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –ø–∏–∫—Å–µ–ª–µ–π –æ–∫–∞–∑–∞–ª—Å—è –≤—ã—à–µ –ø–æ—Ä–æ–≥–∞.
(–ø—Ä–∏–º–µ—Ä: P = 30% ‚áí T = –∑–Ω–∞—á–µ–Ω–∏–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º 30% –ø–∏–∫—Å–µ–ª–µ–π —è—Ä—á–µ)

2.2. –ú–µ—Ç–æ–¥ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–π

–ù–∞—á–∞—Ç—å —Å T‚ÇÄ = (min + max)/2

–ù–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –¥–µ–ª–∏—Ç—å –ø–∏–∫—Å–µ–ª–∏ –Ω–∞ –¥–≤–∞ –∫–ª–∞—Å—Å–∞ (–Ω–∏–∂–µ –∏ –≤—ã—à–µ T),
—Å—á–∏—Ç–∞—Ç—å –∏—Ö —Å—Ä–µ–¥–Ω–∏–µ Œº‚ÇÅ –∏ Œº‚ÇÇ,
–æ–±–Ω–æ–≤–ª—è—Ç—å T_new = (Œº‚ÇÅ + Œº‚ÇÇ)/2

–ó–∞–≤–µ—Ä—à–∞—Ç—å –ø—Ä–∏ |T_new - T_old| < Œµ.

2.3. –ú–µ—Ç–æ–¥ K-—Å—Ä–µ–¥–Ω–∏—Ö

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å 1D-–∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—é –∑–Ω–∞—á–µ–Ω–∏–π —è—Ä–∫–æ—Å—Ç–∏ (k = 2,3,...)

–î–ª—è –∫–∞–∂–¥–æ–≥–æ k –≤—ã–≤–æ–¥–∏—Ç—å –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—É –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏

–í—ã–¥–µ–ª—è—Ç—å –ø–æ—Ä–æ–≥–∏ –ø–æ —Å—Ä–µ–¥–Ω–∏–º –∑–Ω–∞—á–µ–Ω–∏–π –∫–ª–∞—Å—Ç–µ—Ä–æ–≤.

2.4. –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –∏ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ

–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—É —è—Ä–∫–æ—Å—Ç–µ–π (256 –±–∏–Ω–æ–≤)

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–≤—ë—Ä—Ç–∫—É —Å –æ–∫–Ω–æ–º (—Ä–∞–∑–Ω—ã–µ —à–∏—Ä–∏–Ω—ã)

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ –ø–∏–∫–æ–≤ –∏ –ø–æ—Ä–æ–≥–æ–≤ –º–µ–∂–¥—É –Ω–∏–º–∏

–°—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–∏ —Ä–∞–∑–Ω–æ–º —á–∏—Å–ª–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–π

üìå 3. –ü–æ—Ä–æ–≥–æ–≤–∞—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º –ø–æ—Ä–æ–≥–æ–º

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ—Ä–æ–≥ T(x, y) –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ.

–ê–ª–≥–æ—Ä–∏—Ç–º:

–†–∞–∑–±–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –æ–∫–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 15√ó15)

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–∫–Ω–∞ –≤—ã—á–∏—Å–ª–∏—Ç—å:

—Å—Ä–µ–¥–Ω–µ–µ (mean),

–º–µ–¥–∏–∞–Ω—É (median),

—É—Å—Ä–µ–¥–Ω—ë–Ω–Ω–æ–µ (min + max)/2

–ü–æ—Ä–æ–≥ –¥–ª—è –æ–∫–Ω–∞:
T_local = f(stat, C) –≥–¥–µ C ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—â–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä (–æ—Ç–Ω—è—Ç—å, –ø—Ä–∏–±–∞–≤–∏—Ç—å –∏ —Ç.–¥.)

–í—ã–ø–æ–ª–Ω–∏—Ç—å –±–∏–Ω–∞—Ä–∏–∑–∞—Ü–∏—é –∏ —Å–æ–±—Ä–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

–¢—Ä–µ–±—É–µ—Ç—Å—è:

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ:

—Ç–∏–ø—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (mean, median, (min+max)/2)

–∑–Ω–∞—á–µ–Ω–∏—é C

—Ä–∞–∑–º–µ—Ä—É –æ–∫–Ω–∞

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ —Å—Ä–∞–≤–Ω–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞ –æ–¥–Ω–æ–º —ç–∫—Ä–∞–Ω–µ.

üìä 4. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

–î–ª—è –≤—Å–µ—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (show_comparison), –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç—Ä–æ—è—Ç:

–∏—Å—Ö–æ–¥–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ;

–≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—É;

–º–∞—Å–∫—É/—Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏;

—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–∑–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (T, k, C) —Ä—è–¥–æ–º.

–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∫–∞—á–µ—Å—Ç–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–ª—è –∏–∑–º–µ–Ω–∏–≤—à–∏—Ö—Å—è –ø–∏–∫—Å–µ–ª–µ–π, —ç–Ω—Ç—Ä–æ–ø–∏—è, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–≥–º–µ–Ω—Ç–æ–≤).

‚öôÔ∏è 5. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ

(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≤—Ä–µ–º–µ–Ω–∏)

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–µ –∂–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –≤–∏–¥–µ–æ—Ñ–∞–π–ª–∞ –∏–ª–∏ –∫–∞–º–µ—Ä—ã:

–ø–æ–∫–∞–¥—Ä–æ–≤–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞;

–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏;

–∞–Ω–∞–ª–∏–∑ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–æ—Ä–æ–≥–∞ –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏.

 –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ

–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–ø—Ä–∏–º–µ—Ä):

segmentation/
‚îÇ
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ edges.py          # –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ threshold_global.py # –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–æ—Ä–æ–≥–∏
‚îÇ   ‚îú‚îÄ‚îÄ threshold_adaptive.py # –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä–æ–≥–∏
‚îÇ   ‚îú‚îÄ‚îÄ hist_utils.py     # –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã, —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ, –ø–æ–∏—Å–∫ –ø–∏–∫–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ visual/
‚îÇ   ‚îú‚îÄ‚îÄ display.py        # —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
‚îÇ
‚îî‚îÄ‚îÄ main.py               # CLI / —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ / –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞


üßÆ –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Ñ—É–Ω–∫—Ü–∏–∏
``` Python
def threshold_iterative(image: np.ndarray, eps: float = 0.5, max_iter: int = 50) -> np.ndarray:
    """
    –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–æ—Ä–æ–≥–æ–≤–∞—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–π.
    
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
        image: np.ndarray ‚Äî –≤—Ö–æ–¥–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –æ—Ç—Ç–µ–Ω–∫–∞—Ö —Å–µ—Ä–æ–≥–æ [0,255]
        eps: float ‚Äî –∫—Ä–∏—Ç–µ—Ä–∏–π –æ—Å—Ç–∞–Ω–æ–≤–∞
        max_iter: int ‚Äî –º–∞–∫—Å–∏–º—É–º –∏—Ç–µ—Ä–∞—Ü–∏–π
    
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        np.ndarray ‚Äî –±–∏–Ω–∞—Ä–Ω–∞—è –º–∞—Å–∫–∞ (0 –∏ 255)
    """
```

	